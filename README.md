# fred-pop-gen

Generate population files for [FRED](https://github.com/PublicHealthDynamicsLab/FRED) by assigning schools and workplaces to a synthetic population generated with [rti_synth_pop](https://github.com/RTIInternational/rti_synth_pop).

## Input files

The project depends on the following input files:

### Synthetic population people file

This file is generated by running `rti_synth_pop` on the state you are synthesizing.

Example file path: `data/input/56_2019_persons.parquet`

### Synthetic population households file

This file is generated by running `rti_synth_pop` on the state you are synthesizing.

Example file path: `data/input/WY_2019_households.parquet`

### Public schools file

This file was retrieved from the [NCES Table Generator](https://nces.ed.gov/ccd/elsi/tableGenerator.aspx). The following columns are required:

- Information
  - Basic Information
    - **School ID (12-Digit) - NCES Assigned**
    - **County Number**
- Characteristics
  - School/District Classification Information
    - **Latitude**
    - **Longitude**
  - Grade Span Information
    - **Lowest Grade Offered**
    - **Highest Grade Offered**
- Enrollments
  - Total Enrollment
    - **Total Students, All Grades (Excludes AE)**

If downloading from the source, make sure to trim the header and footer metadata, as it is not valid CSV.

Required file path: `data/input/public-schools.csv`

### Private schools file

This file was retrieved from the [Private School Survey (PSS)](https://nces.ed.gov/surveys/pss/pssdata.asp). CSV files are available in the 'Text' subcolumn of the 'Data' column.

Required file path: `data/input/private-schools.csv`

## Running

The project uses [uv](https://github.com/astral-sh/uv) for Python project management. To install uv, follow their [installation instructions](https://github.com/astral-sh/uv?tab=readme-ov-file#installation).

The project uses [pytask](https://github.com/pytask-dev/pytask) as its workflow management framework. To run the project, just invoke `pytask`:

```bash
# Within the python virtual environment
pytask

# Outside the python virtual environment
uv run pytask
```
